# 代理模式

## 介绍

  代理模式（Proxy Pattern）也称为委托模式，结构型设计模式中的一种。

## 定义

  为其他对象提供一种代理以控制对这个对象的访问。

  所谓的代理者是指一个类别可以作为其他东西的接口。代理者可以作任何东西的接口：网络连接、内存中的大对象、文件或其他昂贵或无法复制的资源。

  著名的代理模式例子为引用基数指针对象。

  当一个复杂对象的多份副本须存在时，代理模式可以结合享元模式以减少内存用量。典型做法是创建一个复杂对象及多个代理者，每个代理者会引用到原来的复杂对象。而作用在代理模式的运算会转送到原本对象。一旦所有的代理者都不存在时，复杂对象会被移除。

## 使用场景

  当无法或不想直接访问某个对象或访问某个对象存在困难时可以通过一个代理对象来间接访问，为了保证客户端使用的通透性，委托对象与代理对象需要实现相同的接口。

## 代码示例

*Subject.java*
```java
public abstract class Subject {

    /**
     * 一个普通的业务方法
     */
    public abstract void visit();

}
```

*RealSubject.java*
```java
public class RealSubject extends Subject {
    @Override
    public void visit() {
        System.out.println("Real Subject");
    }
}
```

*ProxySubject.java*
```java
public class ProxySubject extends Subject {

    private RealSubject mRealSubject;

    public ProxySubject(RealSubject subject) {
        mRealSubject = subject;
    }

    @Override
    public void visit() {
        mRealSubject.visit();
    }
}
```

*Client.java*
```java
public class Client {
    public static void main(String[] args) {
        RealSubject realSubject = new RealSubject();
        ProxySubject proxySubject = new ProxySubject(realSubject);
        proxySubject.visit();
    }
}
```

## 角色介绍

* Subject：抽象主题类，该类的主要职责是声明真实主题与代理的共同接口方法，该类既可以是一个接口，也可以是一个抽象类。

* RealSubject：真实主题类，该类也被称为被委托类或代理类，该类定义了代理所表示的真实对象，由其执行具体的业务逻辑方法，而客户端则通过代理类间接地调用真实主题类中定义的方法。

* ProxySubject：代理类，该类也被称为委托类或被代理类，该类持有一个对真实主题类的引用，在其实现的接口方法中调用真实主题类中相应的接口方法执行，以此起到代理的作用。

* Client：客户类
